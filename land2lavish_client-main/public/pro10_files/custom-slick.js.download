/*=====================
     slick slider js
     ==========================*/
$(document).ready(function () {

   document.querySelectorAll('.slide-2').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
     // Debugging output
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 800,
        loop: true,
        arrows: true,
        slidesToShow: 5,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        swipe: false,
        rtl: isRTL, // Set the rtl option based on the data attribute
        responsive: [{
            breakpoint: 1461,
            settings: {
                slidesToShow: 4,
            }
        },
        {
            breakpoint: 1200,
            settings: {
                slidesToShow: 3,
            }
        },
        {
            breakpoint: 765,
            settings: {
                slidesToShow: 2,
            }
        },
        {
            breakpoint: 575,
            settings: {
                slidesToShow: 2,
            }
        },
        ]
    });
});


    $('#partner-prev').click(function () {
        $('.slide-2').slick('slickPrev');
    });

    // Click event handler for next arrow button
    $('#partner-next').click(function () {
        $('.slide-2').slick('slickNext');
    });

    document.querySelectorAll('.testimonial-2').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 3500,
        autoplaySpeed: 4000,
        fade: true,
        autoplay: true,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 768,
                settings: {
                    arrows: false,
                }
            }
        ]
    });
});

document.querySelectorAll('.about-3').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 800,
        loop: true,
        arrows: true,
        slidesToShow: 4,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        swipeToSlide: true,
        swipe: false,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 1400,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    arrows: false,
                }
            }
        ]
    });
});
	
	  function setEqualHeight() {
        // Select all slick-track elements
        $('.slick-track').each(function() {
            var propertyBoxes = $(this).find('.property-box');
            var maxHeight = 0;

            // Reset the height to auto to recalculate
            propertyBoxes.css('height', 'auto');

            // Calculate the maximum height
            propertyBoxes.each(function() {
                var boxHeight = $(this).outerHeight();
                if (boxHeight > maxHeight) {
                    maxHeight = boxHeight;
                }
            });

            // Set each property-box's height to the maximum height
            propertyBoxes.css('height', maxHeight + 'px');
        });
    }

    // Optionally, call the function on window resize
    $(window).on('resize', function() {
        setEqualHeight();
    });


    $('.prev-arrow').click(function () {
        $('.about-3').slick('slickPrev');
    });

    // Click event handler for next arrow button
    $('.next-arrow').click(function () {
        $('.about-3').slick('slickNext');
    });


   document.querySelectorAll('.property-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    $(slider).on('init', function(event, slick){
            setEqualHeight();
        });
    $(slider).slick({
        dots: true,
        infinite: true,
        speed: 500,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        rtl: isRTL
    });
});


	
document.querySelectorAll('.property-4').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    console.log("hiiiii");
	$(slider).on('init', function(event, slick){
		console.log("initing.......");
            setEqualHeight();
        });
	
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 500,
        arrows: true,
        slidesToShow: 3,
        slidesToScroll: 1,
        swipe: false,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 1200,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    arrows: false,
                }
            }
        ]
    });
});


    $('#offplan-prev').click(function () {
        $('.property-4').slick('slickPrev');
    });

    // Click event handler for next arrow button
    $('#offplan-next').click(function () {
        $('.property-4').slick('slickNext');
    });

   document.querySelectorAll('.property-cards').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 500,
        arrows: true,
        slidesToShow: 3,
        slidesToScroll: 1,
        swipe: false,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 1200,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    arrows: false,
                }
            }
        ]
    });
});


    $('#property-prev').click(function () {
        $('.property-cards').slick('slickPrev');
    });

    // Click event handler for next arrow button
    $('#property-next').click(function () {
        $('.property-cards').slick('slickNext');
    });

     $('.innerimage-slider').each(function() {
        var isRTL = $(this).data('rtl') === true || $(this).data('rtl') === 'true';
        $(this).slick({
            dots: false,
            infinite: true,
            speed: 500,
            arrows: true,
            slidesToShow: 1,
            slidesToScroll: 1,
            rtl: isRTL
        });
    });

   document.querySelectorAll('.feature-4').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 500,
        fade: true,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        rtl: isRTL
    });
});

document.querySelectorAll('.grid-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 800,
        fade: true,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        rtl: isRTL
    });
});

document.querySelectorAll('.single-property-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 1500,
        arrows: false,
        slidesToShow: 3,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 1000,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1,
                }
            },
        ]
    });
});

document.querySelectorAll('.property-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 1500,
        arrows: false,
        slidesToShow: 1,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 1000,
        lazyLoad: 'ondemand',
        rtl: isRTL
    });
});

document.querySelectorAll('.main-property-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 500,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        swipe: true,
        asNavFor: '.property-thumbnail-slider',
        rtl: isRTL
    });
});

document.querySelectorAll('.property-thumbnail-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        slidesToShow: 5,
        slidesToScroll: 1,
        asNavFor: '.main-property-slider',
        dots: false,
        centerMode: true,
        focusOnSelect: true,
        arrows: true,
        infinite: true,
        variableWidth: true,
        rtl: isRTL
    });
});


   document.querySelectorAll('#lightgallery').forEach(function(gallery) {
    var isRTL = gallery.getAttribute('data-rtl') === 'true';
    $(gallery).lightGallery({
        selector: 'a',
        thumbnail: true,
        animateThumb: false,
        showThumbByDefault: false,
        mode: 'lg-fade',
        addClass: 'fixed-size', // Add RTL class if necessary
        download: false,
        counter: false,
        fullScreen: true,
        autoplay: false,
        autoplayControls: false,
        zoom: true,
        enableThumbSwipe: true,
		share:false
    });  
	   
	    $(gallery).on('onAfterOpen.lg', function() {
        if (isRTL) {
            setTimeout(function() {
                adjustRTLPosition();
            }, 500); // Delay to ensure .lg-inner is in the DOM
        }
    });

    // Adjust RTL position on slide
    $(gallery).on('onAfterSlide.lg', function(event, prevIndex, index) {
        if (isRTL) {
            adjustRTLPosition();
        }
    });

    function adjustRTLPosition() {
        const lgInner = document.querySelector('.lg-inner');
        if (lgInner) {
            lgInner.style.left = `${lgInner.clientWidth}px`; // Adjust left to match screen size
        }
    }
});
	
	

    // Sync LightGallery with Slick
   /* $('#lightgallery').on('onAfterOpen.lg', function() {
        var $lightGallery = $(this);
        var $lgThumbnail = $('.property-thumbnail-slider').clone().removeClass('property-thumbnail-slider').addClass('lg-thumbnails');

        $lgThumbnail.insertAfter('.lg-outer .lg-toolbar');

        $lgThumbnail.slick({
            slidesToShow: 5,
            slidesToScroll: 1,
            dots: false,
            centerMode: true,
            focusOnSelect: true,
            arrows: true,
            infinite: true,
            variableWidth: true
        });

        $lgThumbnail.on('click', 'img', function() {
            var index = $(this).data('index');
            $lightGallery.data('lightGallery').goToSlide(index);
        });

        $lightGallery.on('onAfterSlide.lg', function(event, prevIndex, index) {
            $lgThumbnail.slick('slickGoTo', index);
        });
    });

    $('#lightgallery').on('onCloseAfter.lg', function() {
        $('.lg-thumbnails').remove();
    });*/

    document.querySelectorAll('.feature-2').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: true,
        infinite: true,
        speed: 800,
        loop: true,
        arrows: false,
        slidesToShow: 5,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        swipeToSlide: true,
        rtl: isRTL,
        responsive: [{
            breakpoint: 1461,
            settings: {
                slidesToShow: 4,
            }
        },
        {
            breakpoint: 1200,
            settings: {
                slidesToShow: 3,
            }
        },
        {
            breakpoint: 765,
            settings: {
                slidesToShow: 2,
            }
        },
        {
            breakpoint: 575,
            settings: {
                slidesToShow: 1,
            }
        },
        ]
    });
});

document.querySelectorAll('.slidergallery').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        dots: false,
        infinite: true,
        autoplay: true,
        autoplaySpeed: 2000,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 575,
                settings: {
                    slidesToShow: 1,
                }
            },
        ]
    });
});

document.querySelectorAll('.shareyourcv').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 500,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        rtl: isRTL
    });
});

document.querySelectorAll('.amenities-slider').forEach(function(slider) {
    var isRTL = slider.getAttribute('data-rtl') === 'true';
    
    $(slider).slick({
        dots: false,
        infinite: true,
        speed: 1500,
        arrows: true,
        prevArrow: '<button type="button" class="slick-prev"><i class="fas fa-chevron-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next"><i class="fas fa-chevron-right"></i></button>',
        slidesToShow: 6,
        slidesToScroll: 1,
        autoplay: false,
        autoplaySpeed: 1000,
        rtl: isRTL,
        responsive: [
            {
                breakpoint: 1025,
                settings: {
                    slidesToShow: 4,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 2,
                }
            },

            {
                breakpoint: 370,
                settings: {
                    slidesToShow: 2,
                }
            },
        ]
    });
});

	
	

});


// Floating Chat icon
var element = $('.floating-chat');
var myStorage = localStorage;

if (!myStorage.getItem('chatID')) {
    myStorage.setItem('chatID', createUUID());
}

setTimeout(function () {
    element.addClass('enter');
}, 1000);

element.click(openElement);

function openElement() {
    var messages = element.find('.messages');
    var textInput = element.find('.text-box');
    element.find('>i').hide();
    element.addClass('expand');
    element.find('.chat').addClass('enter');
    var strLength = textInput.val().length * 2;
    textInput.keydown(onMetaAndEnter).prop("disabled", false).focus();
    element.off('click', openElement);
    element.find('.header button').click(closeElement);
    element.find('#sendMessage').click(sendNewMessage);
    messages.scrollTop(messages.prop("scrollHeight"));
}

function closeElement() {
    element.find('.chat').removeClass('enter').hide();
    element.find('>i').show();
    element.removeClass('expand');
    element.find('.header button').off('click', closeElement);
    element.find('#sendMessage').off('click', sendNewMessage);
    element.find('.text-box').off('keydown', onMetaAndEnter).prop("disabled", true).blur();
    setTimeout(function () {
        element.find('.chat').removeClass('enter').show()
        element.click(openElement);
    }, 500);
}

function createUUID() {
    var s = [];
    var hexDigits = "0123456789abcdef";
    for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
    }
    s[14] = "4";
    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = "-";

    var uuid = s.join("");
    return uuid;
}

function sendNewMessage() {
    var userInput = $('.text-box');
    var newMessage = userInput.html().replace(/\<div\>|\<br.*?\>/ig, '\n').replace(/\<\/div\>/g, '').trim().replace(/\n/g, '<br>');

    if (!newMessage) return;

    var messagesContainer = $('.messages');

    messagesContainer.append([
        '<li class="other">',
        newMessage,
        '</li>'
    ].join(''));

    // clean out old message
    userInput.html('');
    // focus on input
    userInput.focus();

    messagesContainer.finish().animate({
        scrollTop: messagesContainer.prop("scrollHeight")
    }, 250);
}

function onMetaAndEnter(event) {
    if ((event.metaKey || event.ctrlKey) && event.keyCode == 13) {
        sendNewMessage();
    }
}


//Product Detail page show and more content
document.addEventListener('DOMContentLoaded', function () {
    var hiddenContent = document.querySelector('.hidden-content');
    var showMoreBtn = document.querySelector('.show-more-btn');

    var showMoreText = showMoreBtn.getAttribute('data-show-more');
    var showLessText = showMoreBtn.getAttribute('data-show-less');

    showMoreBtn.addEventListener('click', function () {
        var computedStyle = window.getComputedStyle(hiddenContent);
        if (computedStyle.display === 'none') {
            hiddenContent.style.display = 'block';
            showMoreBtn.innerHTML = showLessText;
        } else {
            hiddenContent.style.display = 'none';
            showMoreBtn.innerHTML = showMoreText;
        }
    });
});

//Product Detail page show and more amenities
document.addEventListener('DOMContentLoaded', function () {
    var hiddenContent = document.querySelector('.hidden-content2');
    var showMoreBtn = document.querySelector('.viewmore');

    showMoreBtn.addEventListener('click', function () {
        var computedStyle = window.getComputedStyle(hiddenContent);
        if (computedStyle.display === 'none') {
            hiddenContent.style.display = 'block';
            showMoreBtn.innerHTML = 'View Less';
        } else {
            hiddenContent.style.display = 'none';
            showMoreBtn.innerHTML = 'View More';
        }
    });
});

